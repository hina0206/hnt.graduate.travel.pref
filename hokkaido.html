<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>北海道 - にほん旅ナビ</title>
  <link rel="stylesheet" href="pref-style.css">
</head>
<body data-pref="hokkaido">
  <!-- ヘッダー -->
  <header class="site-header">
    <div class="header-inner">
      <a href="https://hina0206.github.io/hnt.graduate.travel/" class="site-title">にほん旅ナビ</a>
      <a href="https://hina0206.github.io/hnt.graduate.travel/japan.html" class="nav-link">都道府県から探す</a>
    </div>
  </header>

  <!-- 都道府県カバー -->
  <section class="pref-cover" style="background-image: url('images/hokkaido.jpg');">
    <h1>北海道</h1>
  </section>

  <!-- スポットカード -->
  <main>
    <div id="spot-cards" class="spot-grid"></div>
  </main>

  <!-- フッター -->
  <footer class="site-footer">
    <p>© にほん旅ナビ</p>
  </footer>

  <!-- JS: spots.json から該当都道府県カードを生成 -->
  <script>
    (function(){
      const SPOTS_URL = 'https://hina0206.github.io/hnt.graduate.travel.spot/spots.json';
      const prefSlug = document.body.getAttribute('data-pref'); // ex: "hokkaido"
      const container = document.getElementById('spot-cards');

      fetch(SPOTS_URL)
        .then(r => r.json())
        .then(spots => {
          const filtered = spots.filter(s => s.prefectureRomaji === prefSlug);
          if(filtered.length === 0){
            container.innerHTML = '<p class="no-result">この都道府県のスポットはまだ登録されていません。</p>';
            return;
          }

          filtered.forEach(spot => {
            const card = document.createElement('div');
            card.className = 'spot-card';
            card.onclick = () => { window.location.href = `../spots/${spot.id}.html`; };

            card.innerHTML = `
              <img src="${spot.mainImage}" alt="${spot.name}">
              <div class="card-content">
                <h3>${spot.name}</h3>
                <p class="pref">${spot.prefecture}</p>
                <div class="card-tags">
                  ${spot.tags.map(tag => `<span class="tag" onclick="event.stopPropagation(); window.location.href='../tag.html?tag=${encodeURIComponent(tag)}'">${tag}</span>`).join('')}
                </div>
              </div>
            `;
            container.appendChild(card);
          });
        })
        .catch(err => {
          console.error(err);
          container.innerHTML = '<p class="no-result">データの読み込みに失敗しました。</p>';
        });
    })();
  </script>
</body>
</html>
